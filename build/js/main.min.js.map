{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Calendar.js","webpack:///./src/js/fetch.js","webpack:///./src/js/main.js","webpack:///./src/js/myCalendar.js","webpack:///./src/js/popup.js","webpack:///./src/js/render.js","webpack:///./src/js/renderEvents.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","monthDays","isLeap","Calendar","_classCallCheck","this","now","Date","today","day","getDate","month","getMonth","year","getFullYear","currentState","currentMonth","initialState","getPrevMonth","getNextMonth","nextMonth","create","prevMonth","changeDateHandler","days","firstWeakDay","getWeakDay","lastWeakDay","isCurrentMonth","weakDay","getDay","calendar","anotherMonth","anotherYear","anotherMonthDays","__webpack_exports__","callback","fetch","then","res","json","catch","error","console","message","document","addEventListener","calendarBlock","querySelector","dateBlock","dateText","prevBtn","nextBtn","todayBtn","calendarList","render","_render__WEBPACK_IMPORTED_MODULE_1__","_myCalendar__WEBPACK_IMPORTED_MODULE_0__","_fetch__WEBPACK_IMPORTED_MODULE_2__","calendarItems","querySelectorAll","_renderEvents__WEBPACK_IMPORTED_MODULE_3__","eventBlocks","concat","_toConsumableArray","filter","item","classList","contains","log","_popup__WEBPACK_IMPORTED_MODULE_4__","prev","next","reset","popupWrapper","popup","popupContent","closer","clickBlockHandler","evt","target","currentTarget","content","cloneNode","innerHTML","add","appendChild","removeEventListener","closePopupHandler","remove","body","clientWidth","forEach","block","weakDays","long","short","months","renderDate","container","calendarObj","textContent","renderCalendar","ul","todayDate","prevMonthDays","nextMonthDays","fragment","createDocumentFragment","template","renderBlock","resizeHeight","window","resizeAllBlocks","_item$classList","append","arguments","length","undefined","createElement","span","apply","setAttribute","prepend","style","height","offsetWidth","blocks","findActualEvents","allEvents","event","date","timestamp","renderEvents","events","eventBlock","find","split","pop","renderEvent","title","text","names","join"],"mappings":"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","file":"main.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","const monthDays = isLeap => [\r\n  31,\r\n  isLeap ? 29 : 28,\r\n  31,\r\n  30,\r\n  31,\r\n  30,\r\n  31,\r\n  31,\r\n  30,\r\n  31,\r\n  30,\r\n  31\r\n];\r\n\r\n// Класс Календарь, содержит текущую дату, месяц, который в данный момент отрисован на экране, а также методы для навигации по месяцам\r\nexport default class Calendar {\r\n  constructor() {\r\n    const now = new Date();\r\n    this.today = {\r\n      day: now.getDate(),\r\n      month: now.getMonth(),\r\n      year: now.getFullYear(),\r\n      isLeap: !(now.getFullYear() % 4)\r\n    };\r\n    this.currentState = {\r\n      currentMonth: this.initialState\r\n    };\r\n    this.getPrevMonth();\r\n    this.getNextMonth();\r\n  }\r\n\r\n  get initialState() {\r\n    const month = this.today.month;\r\n    const year = this.today.year;\r\n    const isLeap = this.today.isLeap;\r\n    const days = monthDays(isLeap)[month];\r\n    const firstWeakDay = this.getWeakDay(year, month, 1);\r\n    const lastWeakDay = this.getWeakDay(year, month, days);\r\n    const isCurrentMonth = true;\r\n\r\n    return {\r\n      month,\r\n      year,\r\n      days,\r\n      isLeap,\r\n      firstWeakDay,\r\n      lastWeakDay,\r\n      isCurrentMonth\r\n    };\r\n  }\r\n\r\n  get month() {\r\n    return this.currentState.currentMonth.month; //\r\n  }\r\n  set month(anotherMonth) {\r\n    this.currentState.currentMonth.month = anotherMonth;\r\n  }\r\n\r\n  get year() {\r\n    return this.currentState.currentMonth.year; //\r\n  }\r\n  set year(anotherYear) {\r\n    this.currentState.currentMonth.year = anotherYear;\r\n  }\r\n\r\n  get days() {\r\n    return this.currentState.currentMonth.days; //\r\n  }\r\n  set days(anotherMonthDays) {\r\n    this.currentState.currentMonth.days = anotherMonthDays;\r\n  }\r\n  get prevMonthDays() {\r\n    return this.currentState.prevMonth.days; //\r\n  }\r\n  get nextMonthDays() {\r\n    return this.currentState.nextMonth.days;\r\n  }\r\n\r\n  get firstWeakDay() {\r\n    return this.currentState.currentMonth.firstWeakDay; //\r\n  }\r\n  get lastWeakDay() {\r\n    return this.currentState.currentMonth.lastWeakDay; //\r\n  }\r\n\r\n  get isCurrentMonth() {\r\n    return this.currentState.currentMonth.isCurrentMonth; //\r\n  }\r\n\r\n  get todayDate() {\r\n    return this.today.day; //\r\n  }\r\n\r\n  prev() {\r\n    this.currentState.nextMonth = Object.create(this.currentState.currentMonth);\r\n    this.currentState.currentMonth = Object.create(this.currentState.prevMonth);\r\n    this.currentState.prevMonth = Object.create(this.getPrevMonth());\r\n\r\n    this.changeDateHandler(this);\r\n  }\r\n\r\n  next() {\r\n    this.currentState.prevMonth = Object.create(this.currentState.currentMonth);\r\n    this.currentState.currentMonth = Object.create(this.currentState.nextMonth);\r\n    this.currentState.nextMonth = Object.create(this.getNextMonth());\r\n\r\n    this.changeDateHandler(this);\r\n  }\r\n\r\n  reset() {\r\n    this.currentState.currentMonth = this.initialState;\r\n    this.getPrevMonth();\r\n    this.getNextMonth();\r\n\r\n    this.changeDateHandler(this);\r\n  }\r\n\r\n  getPrevMonth() {\r\n    const month = this.month ? this.month - 1 : 11;\r\n    const year = this.year - (month ? 0 : 1);\r\n    const isLeap =\r\n      month === 11 ? !(year % 4) : this.currentState.currentMonth.isLeap;\r\n    const days = monthDays(isLeap)[month];\r\n    const firstWeakDay = this.getWeakDay(year, month, 1);\r\n    const lastWeakDay = this.getWeakDay(year, month, days);\r\n    const isCurrentMonth =\r\n      month === this.today.month && year === this.today.year;\r\n\r\n    this.currentState.prevMonth = {\r\n      month,\r\n      year,\r\n      days,\r\n      isLeap,\r\n      firstWeakDay,\r\n      lastWeakDay,\r\n      isCurrentMonth\r\n    };\r\n\r\n    return this.currentState.prevMonth;\r\n  }\r\n\r\n  getNextMonth() {\r\n    const month = this.month === 11 ? 0 : this.month + 1;\r\n    const year = this.year + (month === 11 ? 1 : 0);\r\n    const isLeap = month ? this.currentState.currentMonth.isLeap : !(year % 4);\r\n    const days = monthDays(isLeap)[month];\r\n    const firstWeakDay = this.getWeakDay(year, month, 1);\r\n    const lastWeakDay = this.getWeakDay(year, month, days);\r\n    const isCurrentMonth =\r\n      month === this.today.month && year === this.today.year;\r\n\r\n    this.currentState.nextMonth = {\r\n      month,\r\n      year,\r\n      days,\r\n      isLeap,\r\n      firstWeakDay,\r\n      lastWeakDay,\r\n      isCurrentMonth\r\n    };\r\n\r\n    return this.currentState.nextMonth;\r\n  }\r\n\r\n  getWeakDay(year, month, day) {\r\n    const weakDay = new Date(year, month, day).getDay();\r\n\r\n    return weakDay ? weakDay : 7;\r\n  }\r\n\r\n  changeDateHandler(calendar) {\r\n    return calendar;\r\n  }\r\n}\r\n","const fetchEvents = callback => {\r\n  return fetch('events.json')\r\n    .then(res => res.json())\r\n    .then(json => callback(json))\r\n    .catch(error => console.error(`Cannot show events: ${error.message}`));\r\n};\r\n\r\nexport default fetchEvents;\r\n","import calendar from './myCalendar';\r\nimport {renderCalendar, renderDate} from './render';\r\nimport fetchEvents from './fetch';\r\nimport {renderEvents, findActualEvents} from './renderEvents';\r\nimport initPopup from './popup';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const calendarBlock = document.querySelector('.calendar');\r\n  const dateBlock = calendarBlock.querySelector('.calendar__date');\r\n  const dateText = dateBlock.querySelector('.calendar__date-text');\r\n  const prevBtn = dateBlock.querySelector('.calendar__date-btn--prev');\r\n  const nextBtn = dateBlock.querySelector('.calendar__date-btn--next');\r\n  const todayBtn = calendarBlock.querySelector('.calendar__today');\r\n  const calendarList = calendarBlock.querySelector('.calendar__list');\r\n\r\n  const render = () => {\r\n    renderDate(dateText, calendar);\r\n    renderCalendar(calendarList, calendar);\r\n    fetchEvents(res => {\r\n      const calendarItems = calendarBlock.querySelectorAll('.calendar__item');\r\n\r\n      renderEvents(calendarItems, findActualEvents(res, calendar));\r\n\r\n      const eventBlocks = [...calendarItems].filter(item =>\r\n        item.classList.contains('calendar__item--event')\r\n      );\r\n      console.log(eventBlocks);\r\n\r\n      if (eventBlocks) {\r\n        initPopup(eventBlocks);\r\n      }\r\n    });\r\n  };\r\n\r\n  calendar.changeDateHandler = render;\r\n\r\n  prevBtn.addEventListener('click', () => calendar.prev());\r\n  nextBtn.addEventListener('click', () => calendar.next());\r\n  todayBtn.addEventListener('click', () => calendar.reset());\r\n\r\n  render();\r\n});\r\n","import Calendar from './Calendar';\r\n\r\nconst calendar = new Calendar();\r\n\r\nexport default calendar;\r\n","const popupWrapper = document.querySelector('.popup-wrapper');\r\nconst popup = popupWrapper.querySelector('.popup');\r\nconst popupContent = popup.querySelector('.popup__content');\r\nconst closer = popup.querySelector('.popup__close');\r\n\r\nconst initPopup = eventBlocks => {\r\n  if (document.body.clientWidth > 900) return false;\r\n\r\n  [...eventBlocks].forEach(block => {\r\n    block.addEventListener('click', clickBlockHandler);\r\n  });\r\n};\r\n\r\nconst clickBlockHandler = evt => {\r\n  const target = evt.currentTarget;\r\n  const content = target.querySelector('.event').cloneNode(true);\r\n\r\n  popupContent.innerHTML = '';\r\n  content.classList.add('event--active');\r\n  popupContent.appendChild(content);\r\n  console.log(popup);\r\n\r\n  const closePopupHandler = () => {\r\n    popupWrapper.classList.remove('popup-wrapper--active');\r\n    closer.removeEventListener('click', closePopupHandler);\r\n    target.addEventListener('click', clickBlockHandler);\r\n  };\r\n\r\n  popupWrapper.classList.add('popup-wrapper--active');\r\n\r\n  target.removeEventListener('click', clickBlockHandler);\r\n  closer.addEventListener('click', closePopupHandler);\r\n};\r\n\r\nexport default initPopup;\r\n","const weakDays = [\r\n  {\r\n    long: 'Понедельник',\r\n    short: 'ПН'\r\n  },\r\n  {\r\n    long: 'Вторник',\r\n    short: 'ВТ'\r\n  },\r\n  {\r\n    long: 'Среда',\r\n    short: 'СР'\r\n  },\r\n  {\r\n    long: 'Четверг',\r\n    short: 'ЧТ'\r\n  },\r\n  {\r\n    long: 'Пятница',\r\n    short: 'ПТ'\r\n  },\r\n  {\r\n    long: 'Суббота',\r\n    short: 'СБ'\r\n  },\r\n  {\r\n    long: 'Воскресенье',\r\n    short: 'ВС'\r\n  }\r\n];\r\n\r\nconst months = [\r\n  'Январь',\r\n  'Февраль',\r\n  'Март',\r\n  'Апрель',\r\n  'Май',\r\n  'Июнь',\r\n  'Июль',\r\n  'Август',\r\n  'Сентябрь',\r\n  'Октябрь',\r\n  'Ноябрь',\r\n  'Декабрь'\r\n];\r\n\r\nexport const renderDate = (container, calendarObj) => {\r\n  container.textContent = `${months[calendarObj.month]} ${calendarObj.year}`;\r\n};\r\n\r\nexport const renderCalendar = (ul, calendarObj) => {\r\n  const {firstWeakDay, lastWeakDay, isCurrentMonth, todayDate} = calendarObj;\r\n\r\n  let prevMonthDays = calendarObj.prevMonthDays;\r\n  let nextMonthDays = 1;\r\n\r\n  const fragment = document.createDocumentFragment();\r\n\r\n  for (let i = firstWeakDay - 1; i >= 1; i--) {\r\n    const classList = ['calendar__item', 'calendar__item--inactive'];\r\n    const template = `${weakDays[i - 1].long}, ${prevMonthDays}`;\r\n\r\n    renderBlock(fragment, classList, template, false);\r\n\r\n    prevMonthDays--;\r\n  }\r\n\r\n  for (let i = 1; i <= calendarObj.days; i++) {\r\n    const classList =\r\n      isCurrentMonth && todayDate === i\r\n        ? ['calendar__item', 'calendar__item--active']\r\n        : ['calendar__item'];\r\n    const template =\r\n      firstWeakDay + i - 1 <= 7\r\n        ? `${weakDays[firstWeakDay + i - 2].long}, ${i}`\r\n        : i;\r\n\r\n    renderBlock(fragment, classList, template);\r\n  }\r\n\r\n  for (let i = lastWeakDay + 1; i <= 7; i++) {\r\n    const classList = ['calendar__item', 'calendar__item--inactive'];\r\n\r\n    renderBlock(fragment, classList, nextMonthDays);\r\n\r\n    nextMonthDays++;\r\n  }\r\n\r\n  ul.innerHTML = '';\r\n  ul.appendChild(fragment);\r\n\r\n  const calendarItems = ul.querySelectorAll('.calendar__item');\r\n\r\n  calendarItems.forEach(item => resizeHeight(item));\r\n\r\n  window.addEventListener('resize', () => resizeAllBlocks(calendarItems));\r\n};\r\n\r\nconst renderBlock = (container, classList, content, append = true) => {\r\n  const item = document.createElement('li');\r\n  const span = document.createElement('span');\r\n\r\n  item.classList.add(...classList);\r\n  item.setAttribute('tabindex', 0);\r\n  span.classList.add('calendar__item-date');\r\n  span.textContent = content;\r\n  item.appendChild(span);\r\n  append ? container.appendChild(item) : container.prepend(item);\r\n};\r\n\r\nconst resizeHeight = block => {\r\n  block.style.height = `${block.offsetWidth}px`;\r\n};\r\n\r\nconst resizeAllBlocks = blocks => {\r\n  blocks.forEach(block => resizeHeight(block));\r\n};\r\n","export const findActualEvents = (allEvents, calendarObj) => {\r\n  return allEvents.filter(event => {\r\n    const date = new Date(event.timestamp);\r\n\r\n    return (\r\n      calendarObj.month === date.getMonth() &&\r\n      calendarObj.year === date.getFullYear()\r\n    );\r\n  });\r\n};\r\n\r\nexport const renderEvents = (container, events) => {\r\n  events.forEach(event => {\r\n    const day = new Date(event.timestamp).getDate();\r\n\r\n    const eventBlock = [...container].find(item => {\r\n      return (\r\n        +item\r\n          .querySelector('.calendar__item-date')\r\n          .textContent.split(', ')\r\n          .pop() === day\r\n      );\r\n    });\r\n\r\n    renderEvent(eventBlock, event);\r\n  });\r\n};\r\n\r\nconst renderEvent = (eventBlock, event) => {\r\n  const content = document.createElement('div');\r\n  const title = document.createElement('h2');\r\n  const text = document.createElement('p');\r\n\r\n  eventBlock.classList.add('calendar__item--event');\r\n  content.classList.add('event');\r\n  title.classList.add('event__note');\r\n  text.classList.add('event__text');\r\n\r\n  title.textContent = event.title;\r\n  text.textContent = event.names.join(', ');\r\n\r\n  content.appendChild(title);\r\n  content.appendChild(text);\r\n  eventBlock.appendChild(content);\r\n};\r\n"],"sourceRoot":""}